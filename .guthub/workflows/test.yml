name: Download Azure Web Logs
on:
  workflow_dispatch:
    inputs:
      resource-group-name:
        default: 'dev-onyx-sandbox-v1-eun-layer3-rg'
        description: 'Name of the resource group the webapp is in'
        required: true
      webapp-name:
        default: 'dev-onyx-sandbox-v1-eun-layer3-app'
        description: 'Name of the webapp'
        required: true
      environment:
        description: 'Environment: deveun or prodeun'
        default: deveun
        type: environment
        required: true 

jobs:
  get-the-logs:
    runs-on: ubuntu-latest
    name: Get the application logs
    environment:
      name: ${{ github.event.inputs.environment}}

    steps:
      - name: 'Get log files'
        id: get-logs
        uses: azure/CLI@v1
        with:
          azcliversion: 2.42.0
          inlineScript: |
            set -x
            APP_NAME=${{ github.event.inputs.webapp-name}}
            RG_NAME=${{ github.event.inputs.resource-group-name}}
            SECRET="${{ secrets.TEST }}"
            echo "$APP_NAME"
            echo "$RG_NAME"
            echo "$SECRET"


